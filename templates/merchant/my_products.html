{% extends 'base.html' %}
{% block title %}{{ _('My Products') }}{% endblock %}

{% block content %}
<h2 class="text-center mb-4">üì¶ {{ _('My Products') }}</h2>

{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="alert alert-info mt-4">
      {% for category, message in messages %}
        <p>{{ message }}</p>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

{% if products %}
  <div class="table-responsive">
    <table class="table table-bordered table-hover align-middle bg-white">
      <thead class="table-light text-center">
        <tr>
          <th>{{ _('Image') }}</th>
          <th>{{ _('Name') }}</th>
          <th>{{ _('Price') }}</th>
          <th>{{ _('Status') }}</th>
          <th>{{ _('Actions') }}</th>
        </tr>
      </thead>
      <tbody>
        {% for product in products %}
          <tr class="text-center">
            <td>
              <img src="{{ product.image }}" alt="{{ product.name }}" class="img-fluid" style="width: 80px; height: 80px; object-fit: cover; border-radius: 6px;">
            </td>
            <td>{{ product.name }}</td>
            <td>{{ product.price }} ‚Ç¨</td>
            <td>
              {% if product.is_approved %}
                <span class="badge bg-success">{{ _('Approved') }} ‚úÖ</span>
              {% else %}
                <span class="badge bg-warning text-dark">{{ _('Pending approval') }} ‚è≥</span>
              {% endif %}
            </td>
            <td>
              <a href="{{ url_for('merchant.edit_product', product_id=product.id) }}" class="btn btn-sm btn-outline-warning">
                ‚úèÔ∏è {{ _('Edit') }}
              </a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% else %}
  <p class="text-center text-muted">{{ _('No products available currently.') }}</p>
{% endif %}
{% endblock %}